<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRYPTO DIVER | Bybit Heatmap ðŸ’°</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-dark: #0a0a0f;
            --bg-mid: #151520;
            --neon-cyan: #00ffff;
            --neon-green: #00ff88;
            --neon-pink: #ff0080;
            --neon-red: #ff3366;
            --gold: #ffd700;
            --text-primary: #ffffff;
            --text-secondary: #888888;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(180deg, var(--bg-dark) 0%, var(--bg-mid) 50%, var(--bg-dark) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text-primary);
        }

        /* ==========================================
           CRYPTO DIVER BACKGROUND
           ========================================== */
        .crypto-diver-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* Title */
        .diver-title {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            font-weight: 900;
            letter-spacing: 8px;
            color: #ffffff;
            text-shadow: 
                0 0 10px var(--neon-cyan),
                0 0 20px var(--neon-cyan),
                0 0 40px var(--neon-cyan);
            animation: titlePulse 3s ease-in-out infinite;
            z-index: 10;
        }

        .diver-subtitle {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            font-style: italic;
            color: var(--text-secondary);
            letter-spacing: 2px;
            z-index: 10;
        }

        @keyframes titlePulse {
            0%, 100% { text-shadow: 0 0 10px var(--neon-cyan), 0 0 20px var(--neon-cyan), 0 0 40px var(--neon-cyan); }
            50% { text-shadow: 0 0 20px var(--neon-cyan), 0 0 40px var(--neon-cyan), 0 0 60px var(--neon-cyan); }
        }

        /* SVG Container */
        .diver-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* ==========================================
           HEADER
           ========================================== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px 25px;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 255, 255, 0.1);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--neon-cyan);
            text-shadow: 0 0 20px var(--neon-cyan);
        }

        /* ==========================================
           BUBBLE CONTAINER
           ========================================== */
        #bubble-container {
            position: relative;
            z-index: 50;
            width: 100%;
            min-height: 100vh;
            padding-top: 200px;
            padding-bottom: 50px;
        }

        .bubble-group {
            cursor: pointer;
            filter: drop-shadow(0 0 15px rgba(0, 255, 136, 0.4));
            transition: filter 0.3s ease;
        }

        .bubble-group:hover {
            filter: drop-shadow(0 0 30px rgba(0, 255, 136, 0.7)) brightness(1.2);
        }

        .bubble-label {
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            font-weight: 700;
            text-anchor: middle;
            pointer-events: none;
            fill: #ffffff;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.9);
        }

        .bubble-change {
            font-family: 'Rajdhani', sans-serif;
            font-size: 10px;
            font-weight: 600;
            text-anchor: middle;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- CRYPTO DIVER BACKGROUND -->
    <div class="crypto-diver-bg">
        <div class="diver-title">CRYPTO DIVER</div>
        <div class="diver-subtitle">Deep dive into the volatility abyss</div>
        
        <svg class="diver-svg" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid slice">
            <defs>
                <!-- Glow Filters -->
                <filter id="glow-cyan" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
                
                <filter id="glow-green" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="12" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
                
                <filter id="glow-pink" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="12" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
                
                <filter id="glow-white" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>

                <!-- Gradients -->
                <linearGradient id="grad-green" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#00ff88;stop-opacity:0.3" />
                    <stop offset="50%" style="stop-color:#00ff88;stop-opacity:0.1" />
                    <stop offset="100%" style="stop-color:#00ff88;stop-opacity:0" />
                </linearGradient>
                
                <linearGradient id="grad-pink" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ff0080;stop-opacity:0.3" />
                    <stop offset="50%" style="stop-color:#ff0080;stop-opacity:0.1" />
                    <stop offset="100%" style="stop-color:#ff0080;stop-opacity:0" />
                </linearGradient>
            </defs>

            <!-- BULL DIVER CIRCLES (Left) -->
            <g transform="translate(250, 400)" filter="url(#glow-green)">
                <circle cx="0" cy="0" r="180" fill="none" stroke="url(#grad-green)" stroke-width="2" opacity="0.8">
                    <animate attributeName="r" values="180;200;180" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.8;0.4;0.8" dur="4s" repeatCount="indefinite"/>
                </circle>
                <circle cx="0" cy="0" r="140" fill="none" stroke="url(#grad-green)" stroke-width="2" opacity="0.6">
                    <animate attributeName="r" values="140;160;140" dur="4s" repeatCount="indefinite" begin="0.5s"/>
                    <animate attributeName="opacity" values="0.6;0.3;0.6" dur="4s" repeatCount="indefinite" begin="0.5s"/>
                </circle>
                <circle cx="0" cy="0" r="100" fill="none" stroke="url(#grad-green)" stroke-width="2" opacity="0.4">
                    <animate attributeName="r" values="100;120;100" dur="4s" repeatCount="indefinite" begin="1s"/>
                    <animate attributeName="opacity" values="0.4;0.2;0.4" dur="4s" repeatCount="indefinite" begin="1s"/>
                </circle>
                <circle cx="0" cy="0" r="60" fill="none" stroke="url(#grad-green)" stroke-width="2" opacity="0.3">
                    <animate attributeName="r" values="60;80;60" dur="4s" repeatCount="indefinite" begin="1.5s"/>
                    <animate attributeName="opacity" values="0.3;0.15;0.3" dur="4s" repeatCount="indefinite" begin="1.5s"/>
                </circle>
            </g>

            <!-- BEAR DIVER CIRCLES (Right) -->
            <g transform="translate(950, 400)" filter="url(#glow-pink)">
                <circle cx="0" cy="0" r="180" fill="none" stroke="url(#grad-pink)" stroke-width="2" opacity="0.8">
                    <animate attributeName="r" values="180;200;180" dur="4s" repeatCount="indefinite" begin="2s"/>
                    <animate attributeName="opacity" values="0.8;0.4;0.8" dur="4s" repeatCount="indefinite" begin="2s"/>
                </circle>
                <circle cx="0" cy="0" r="140" fill="none" stroke="url(#grad-pink)" stroke-width="2" opacity="0.6">
                    <animate attributeName="r" values="140;160;140" dur="4s" repeatCount="indefinite" begin="2.5s"/>
                    <animate attributeName="opacity" values="0.6;0.3;0.6" dur="4s" repeatCount="indefinite" begin="2.5s"/>
                </circle>
                <circle cx="0" cy="0" r="100" fill="none" stroke="url(#grad-pink)" stroke-width="2" opacity="0.4">
                    <animate attributeName="r" values="100;120;100" dur="4s" repeatCount="indefinite" begin="3s"/>
                    <animate attributeName="opacity" values="0.4;0.2;0.4" dur="4s" repeatCount="indefinite" begin="3s"/>
                </circle>
                <circle cx="0" cy="0" r="60" fill="none" stroke="url(#grad-pink)" stroke-width="2" opacity="0.3">
                    <animate attributeName="r" values="60;80;60" dur="4s" repeatCount="indefinite" begin="3.5s"/>
                    <animate attributeName="opacity" values="0.3;0.15;0.3" dur="4s" repeatCount="indefinite" begin="3.5s"/>
                </circle>
            </g>

            <!-- BULL DIVER (Left) -->
            <g transform="translate(250, 400)" filter="url(#glow-cyan)">
                <!-- Head -->
                <circle cx="0" cy="-80" r="35" fill="#000" stroke="#00ffff" stroke-width="3"/>
                
                <!-- Body -->
                <rect x="-25" y="-40" width="50" height="100" fill="#000" stroke="#00ffff" stroke-width="3" rx="5"/>
                
                <!-- Arms -->
                <line x1="-25" y1="-20" x2="-70" y2="10" stroke="#00ffff" stroke-width="3" stroke-linecap="round"/>
                <line x1="25" y1="-20" x2="70" y2="10" stroke="#00ffff" stroke-width="3" stroke-linecap="round"/>
                
                <!-- Hands -->
                <circle cx="-70" cy="10" r="12" fill="#00ffff"/>
                <circle cx="70" cy="10" r="12" fill="#00ffff"/>
                
                <!-- Legs -->
                <line x1="-15" y1="60" x2="-30" y2="130" stroke="#00ffff" stroke-width="3" stroke-linecap="round"/>
                <line x1="15" y1="60" x2="30" y2="130" stroke="#00ffff" stroke-width="3" stroke-linecap="round"/>
                
                <!-- Feet -->
                <ellipse cx="-30" cy="135" rx="18" ry="10" fill="#ff0080" stroke="#00ffff" stroke-width="2"/>
                <ellipse cx="30" cy="135" rx="18" ry="10" fill="#ff0080" stroke="#00ffff" stroke-width="2"/>
                
                <!-- Text -->
                <text x="0" y="-10" text-anchor="middle" fill="#00ff88" font-family="Orbitron" font-size="12" font-weight="bold" filter="url(#glow-green)">ENTRY</text>
                <text x="0" y="5" text-anchor="middle" fill="#00ff88" font-family="Orbitron" font-size="12" font-weight="bold" filter="url(#glow-green)">BULL RUN</text>
                
                <!-- Floating animation -->
                <animateTransform attributeName="transform" type="translate" values="250,400; 250,380; 250,400" dur="6s" repeatCount="indefinite" additive="sum"/>
            </g>

            <!-- BEAR DIVER (Right) -->
            <g transform="translate(950, 400)" filter="url(#glow-pink)">
                <!-- Head -->
                <circle cx="0" cy="-80" r="35" fill="#000" stroke="#ff0080" stroke-width="3"/>
                
                <!-- Body -->
                <rect x="-25" y="-40" width="50" height="100" fill="#000" stroke="#ff0080" stroke-width="3" rx="5"/>
                
                <!-- Arms (raised) -->
                <line x1="-25" y1="-30" x2="-60" y2="-70" stroke="#ffd700" stroke-width="3" stroke-linecap="round"/>
                <line x1="25" y1="-30" x2="60" y2="-70" stroke="#ffd700" stroke-width="3" stroke-linecap="round"/>
                
                <!-- Hands (glow) -->
                <circle cx="-60" cy="-70" r="12" fill="#ffd700" filter="url(#glow-white)"/>
                <circle cx="60" cy="-70" r="12" fill="#ffd700" filter="url(#glow-white)"/>
                
                <!-- Legs -->
                <line x1="-15" y1="60" x2="-20" y2="130" stroke="#ff0080" stroke-width="3" stroke-linecap="round"/>
                <line x1="15" y1="60" x2="20" y2="130" stroke="#ff0080" stroke-width="3" stroke-linecap="round"/>
                
                <!-- Feet -->
                <ellipse cx="-20" cy="135" rx="18" ry="10" fill="#00ff88" stroke="#ff0080" stroke-width="2"/>
                <ellipse cx="20" cy="135" rx="18" ry="10" fill="#00ff88" stroke="#ff0080" stroke-width="2"/>
                
                <!-- Text -->
                <text x="0" y="-10" text-anchor="middle" fill="#ff0080" font-family="Orbitron" font-size="12" font-weight="bold" filter="url(#glow-pink)">EXIT</text>
                <text x="0" y="5" text-anchor="middle" fill="#ff0080" font-family="Orbitron" font-size="12" font-weight="bold" filter="url(#glow-pink)">BEAR DIP</text>
                
                <!-- Floating animation -->
                <animateTransform attributeName="transform" type="translate" values="950,400; 950,380; 950,400" dur="6s" repeatCount="indefinite" begin="3s" additive="sum"/>
            </g>

            <!-- DOTTED PATH -->
            <path d="M 320,400 Q 500,350 600,420 T 880,400" 
                  fill="none" 
                  stroke="#ffffff" 
                  stroke-width="2"
                  stroke-dasharray="8,8"
                  filter="url(#glow-white)"
                  opacity="0.6">
                <animate attributeName="stroke-dashoffset" values="0;-16" dur="1s" repeatCount="indefinite"/>
            </path>

            <!-- CRYPTO ICONS Floating -->
            <g opacity="0.3" fill="#ffd700" font-family="monospace" font-size="20">
                <text x="100" y="200">â‚¿</text>
                <text x="500" y="150">Îž</text>
                <text x="800" y="250">â—Ž</text>
                <text x="200" y="600">â‚¿</text>
                <text x="700" y="550">Îž</text>
                <text x="1100" y="300">â‚¿</text>
                <text x="50" y="400">â—Ž</text>
                <text x="600" y="650">â‚¿</text>
                <text x="1000" y="500">Îž</text>
                <text x="400" y="300">â—Ž</text>
            </g>
        </svg>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="logo">ðŸ’° CRYPTO DIVER HEATMAP</div>
    </div>

    <!-- Bubble Container -->
    <div id="bubble-container"></div>

    <script>
        // BUBBLE DATA AND RENDERING (same as before)
        let bubbleData = [];
        
        async function loadData() {
            try {
                const response = await fetch('https://api.bybit.com/v5/market/tickers?category=linear');
                const data = await response.json();

                bubbleData = data.result.list
                    .filter(item => item.symbol.endsWith('USDT'))
                    .map(item => ({
                        symbol: item.symbol.replace('USDT', ''),
                        change24h: parseFloat(item.price24hPcnt) * 100,
                        price: parseFloat(item.lastPrice),
                        volume24h: parseFloat(item.volume24h) * parseFloat(item.lastPrice)
                    }))
                    .filter(item => !isNaN(item.change24h))
                    .sort((a, b) => b.volume24h - a.volume24h)
                    .slice(0, 36);

                renderBubbles();
            } catch (error) {
                console.error('Error:', error);
            }
        }

        function renderBubbles() {
            const container = document.getElementById('bubble-container');
            container.innerHTML = '';
            
            const width = Math.min(container.clientWidth - 20, 1400);
            const cols = Math.floor(width / 180);
            const spacing = width / cols;

            bubbleData.forEach((d, i) => {
                const col = i % cols;
                const row = Math.floor(i / cols);
                const offsetX = (row % 2) * (spacing / 2);
                d.x = col * spacing + spacing / 2 + offsetX;
                d.y = row * spacing + spacing / 2 + 50;
            });

            const svg = d3.select('#bubble-container').append('svg')
                .attr('width', width)
                .attr('height', Math.ceil(bubbleData.length / cols) * spacing + 100);

            const groups = svg.selectAll('.bubble-group')
                .data(bubbleData)
                .enter().append('g')
                .attr('class', 'bubble-group')
                .attr('transform', d => `translate(${d.x},${d.y})`);

            groups.each(function(d) {
                const g = d3.select(this);
                const isPos = d.change24h >= 0;
                const color = isPos ? '#00ff88' : '#ff3366';
                
                // Simple circle bubble for now
                g.append('circle')
                    .attr('r', 40)
                    .attr('fill', 'rgba(0,0,0,0.8)')
                    .attr('stroke', color)
                    .attr('stroke-width', 2)
                    .style('filter', `drop-shadow(0 0 15px ${color})`);
                
                g.append('text')
                    .attr('class', 'bubble-label')
                    .attr('dy', '-0.3em')
                    .text(d.symbol);
                
                g.append('text')
                    .attr('class', 'bubble-change')
                    .attr('dy', '1em')
                    .style('fill', color)
                    .text((d.change24h >= 0 ? '+' : '') + d.change24h.toFixed(1) + '%');
            });
        }

        loadData();
        setInterval(loadData, 30000);
    </script>
</body>
</html>
