<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bybit Heatmap ğŸ’°</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #151530;
            --accent-green: #00ff88;
            --accent-red: #ff3366;
            --accent-cyan: #00d4ff;
            --text-primary: #ffffff;
            --text-secondary: #888888;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #1a1a3e 50%, #0d1f2d 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 36px;
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.8);
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
        }

        /* Shape Container */
        .shape-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .shape-container svg {
            width: 100%;
            height: 100%;
        }

        /* Shapes */
        .shape {
            cursor: pointer;
            transition: filter 0.2s;
        }

        .shape:hover {
            filter: brightness(1.3) drop-shadow(0 0 10px currentColor);
        }

        .shape.positive {
            fill: rgba(0, 255, 136, 0.3);
            stroke: var(--accent-green);
        }

        .shape.negative {
            fill: rgba(255, 51, 102, 0.3);
            stroke: var(--accent-red);
        }

        .shape-text {
            fill: #ffffff;
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: bold;
            pointer-events: none;
            text-anchor: middle;
            dominant-baseline: middle;
        }

        .shape-subtext {
            fill: rgba(255, 255, 255, 0.8);
            font-family: 'Rajdhani', sans-serif;
            font-size: 11px;
            pointer-events: none;
            text-anchor: middle;
            dominant-baseline: middle;
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .legend-dot.positive {
            background: var(--accent-green);
            box-shadow: 0 0 10px var(--accent-green);
        }

        .legend-dot.negative {
            background: var(--accent-red);
            box-shadow: 0 0 10px var(--accent-red);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(10, 10, 26, 0.9);
            backdrop-filter: blur(8px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            padding: 30px;
            animation: modalEnter 0.3s ease;
        }

        @keyframes modalEnter {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 18px;
        }

        .modal-close:hover {
            background: var(--accent-red);
        }

        .modal-body {
            text-align: center;
        }

        .modal-price {
            font-family: 'Orbitron', sans-serif;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .modal-change {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .modal-change.positive {
            background: rgba(0, 255, 136, 0.2);
            color: var(--accent-green);
        }

        .modal-change.negative {
            background: rgba(255, 51, 102, 0.2);
            color: var(--accent-red);
        }

        .modal-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
        }

        .status-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¥ BYBIT HEATMAP</h1>
            <p style="color: var(--text-secondary);">5 Geometric Shapes - Click to explore</p>
        </div>

        <div class="controls">
            <button class="btn" onclick="loadData()">ğŸ”„ Refresh</button>
            <button class="btn" onclick="toggleAnimation()">â¯ï¸ Pause/Play</button>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-dot positive"></div>
                <span>Positive Change</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot negative"></div>
                <span>Negative Change</span>
            </div>
        </div>

        <div class="shape-container" id="shapeContainer">
            <svg id="shapeSvg">
                <defs>
                    <filter id="glow-green" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="4" result="blur"/>
                        <feMerge>
                            <feMergeNode in="blur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <filter id="glow-red" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="4" result="blur"/>
                        <feMerge>
                            <feMergeNode in="blur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                <g id="shapeGroup"></g>
            </svg>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <span style="color: var(--accent-green);">â—</span>
                <span id="positiveCount">Positive: --</span>
            </div>
            <div class="status-item">
                <span style="color: var(--accent-red);">â—</span>
                <span id="negativeCount">Negative: --</span>
            </div>
            <div class="status-item">
                <span>ğŸ“Š</span>
                <span id="totalCount">Total: 5</span>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Coin Details</h3>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CONFIGURATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const SHAPES = [
            { id: 'triangle', name: 'Triangle', type: 'polygon', sides: 3, color: '#00ff88' },
            { id: 'hexagon', name: 'Hexagon', type: 'polygon', sides: 6, color: '#00d4ff' },
            { id: 'diamond', name: 'Diamond', type: 'polygon', sides: 4, rotation: 45, color: '#b829dd' },
            { id: 'star', name: 'Star', type: 'star', points: 5, color: '#ffd700' },
            { id: 'octagon', name: 'Octagon', type: 'polygon', sides: 8, color: '#ff6b35' }
        ];

        let shapeData = [];
        let animationId = null;
        let isAnimating = true;
        let physicsBodies = [];

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SHAPE GENERATORS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function createPolygonPath(cx, cy, radius, sides, rotation = 0) {
            let path = '';
            for (let i = 0; i < sides; i++) {
                const angle = (i * 2 * Math.PI / sides) - (Math.PI / 2) + (rotation * Math.PI / 180);
                const x = cx + radius * Math.cos(angle);
                const y = cy + radius * Math.sin(angle);
                path += (i === 0 ? 'M' : 'L') + ` ${x} ${y}`;
            }
            path += ' Z';
            return path;
        }

        function createStarPath(cx, cy, outerRadius, innerRadius, points) {
            let path = '';
            for (let i = 0; i < points * 2; i++) {
                const angle = (i * Math.PI / points) - (Math.PI / 2);
                const radius = i % 2 === 0 ? outerRadius : innerRadius;
                const x = cx + radius * Math.cos(angle);
                const y = cy + radius * Math.sin(angle);
                path += (i === 0 ? 'M' : 'L') + ` ${x} ${y}`;
            }
            path += ' Z';
            return path;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // DATA GENERATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function generateData() {
            const symbols = ['BTC', 'ETH', 'SOL', 'XRP', 'ADA'];
            
            shapeData = SHAPES.map((shape, index) => ({
                ...shape,
                symbol: symbols[index],
                price: Math.random() * 50000 + 10,
                change24h: (Math.random() - 0.5) * 20, // -10% to +10%
                volume24h: Math.random() * 1000000000
            }));

            updateStatusBar();
            return shapeData;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // RENDERING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function renderShapes() {
            const svg = document.getElementById('shapeSvg');
            const group = document.getElementById('shapeGroup');
            const container = document.getElementById('shapeContainer');
            
            // Clear existing
            group.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // Position shapes in a row
            const spacing = width / (shapeData.length + 1);
            const baseY = height / 2;
            
            physicsBodies = shapeData.map((data, index) => {
                const x = spacing * (index + 1);
                const y = baseY;
                const isPositive = data.change24h >= 0;
                
                // Create shape group
                const shapeGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                shapeGroup.setAttribute('class', 'shape');
                shapeGroup.style.cursor = 'pointer';
                
                // Create the shape path
                let pathD;
                if (data.type === 'star') {
                    pathD = createStarPath(0, 0, 50, 25, data.points);
                } else {
                    pathD = createPolygonPath(0, 0, 50, data.sides, data.rotation || 0);
                }
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathD);
                path.setAttribute('class', `shape ${isPositive ? 'positive' : 'negative'}`);
                path.setAttribute('stroke-width', '3');
                path.setAttribute('filter', isPositive ? 'url(#glow-green)' : 'url(#glow-red)');
                
                // Symbol text
                const symbolText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                symbolText.setAttribute('class', 'shape-text');
                symbolText.setAttribute('y', -5);
                symbolText.textContent = data.symbol;
                
                // Change text
                const changeText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                changeText.setAttribute('class', 'shape-subtext');
                changeText.setAttribute('y', 15);
                changeText.textContent = `${data.change24h >= 0 ? '+' : ''}${data.change24h.toFixed(1)}%`;
                
                // Append to group
                shapeGroup.appendChild(path);
                shapeGroup.appendChild(symbolText);
                shapeGroup.appendChild(changeText);
                
                // Click handler
                shapeGroup.addEventListener('click', () => openModal(data));
                
                // Initial position
                shapeGroup.setAttribute('transform', `translate(${x}, ${y})`);
                
                group.appendChild(shapeGroup);
                
                return {
                    element: shapeGroup,
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    baseX: x,
                    baseY: y,
                    phase: Math.random() * Math.PI * 2
                };
            });
            
            startAnimation();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // PHYSICS / ANIMATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function startAnimation() {
            if (animationId) cancelAnimationFrame(animationId);
            isAnimating = true;
            animate();
        }

        function animate() {
            if (!isAnimating) return;
            
            const time = Date.now() * 0.001;
            const container = document.getElementById('shapeContainer');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            physicsBodies.forEach(body => {
                // Gentle floating motion using sine waves
                const floatX = Math.sin(time + body.phase) * 20;
                const floatY = Math.cos(time * 0.7 + body.phase) * 15;
                
                // Add some rotation
                const rotation = Math.sin(time * 0.5 + body.phase) * 5;
                
                // Apply transform
                const x = body.baseX + floatX;
                const y = body.baseY + floatY;
                
                body.element.setAttribute('transform', 
                    `translate(${x}, ${y}) rotate(${rotation})`
                );
            });
            
            animationId = requestAnimationFrame(animate);
        }

        function toggleAnimation() {
            isAnimating = !isAnimating;
            if (isAnimating) animate();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MODAL FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function openModal(data) {
            const overlay = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            const isPositive = data.change24h >= 0;
            
            title.textContent = `${data.name} (${data.symbol})`;
            
            body.innerHTML = `
                <div class="modal-price" style="color: ${isPositive ? 'var(--accent-green)' : 'var(--accent-red)'}">
                    $${data.price.toLocaleString(undefined, {maximumFractionDigits: 2})}
                </div>
                <div class="modal-change ${isPositive ? 'positive' : 'negative'}">
                    ${isPositive ? 'â–²' : 'â–¼'} ${Math.abs(data.change24h).toFixed(2)}% (24h)
                </div>
                <div class="modal-stats">
                    <div class="stat-box">
                        <div class="stat-label">Symbol</div>
                        <div class="stat-value">${data.symbol}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Shape Type</div>
                        <div class="stat-value">${data.name}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">24h Volume</div>
                        <div class="stat-value">$${(data.volume24h / 1e6).toFixed(1)}M</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Status</div>
                        <div class="stat-value" style="color: ${isPositive ? 'var(--accent-green)' : 'var(--accent-red)'}">
                            ${isPositive ? 'BULLISH' : 'BEARISH'}
                        </div>
                    </div>
                </div>
            `;
            
            overlay.classList.add('active');
        }

        function closeModal(event) {
            if (event && event.target !== event.currentTarget && event.type === 'click') return;
            document.getElementById('modalOverlay').classList.remove('active');
        }

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // STATUS & CONTROLS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function updateStatusBar() {
            const positive = shapeData.filter(d => d.change24h >= 0).length;
            const negative = shapeData.filter(d => d.change24h < 0).length;
            
            document.getElementById('positiveCount').textContent = `Positive: ${positive}`;
            document.getElementById('negativeCount').textContent = `Negative: ${negative}`;
        }

        function loadData() {
            generateData();
            renderShapes();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INITIALIZATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            
            // Handle resize
            window.addEventListener('resize', () => {
                renderShapes();
            });
        });

        // Console greeting
        console.log('%câœ… Bybit Heatmap - Ralph-3 Test Complete', 'color: #00ff88; font-size: 16px; font-weight: bold;');
        console.log('%cFeatures:', 'color: #00d4ff;');
        console.log('  â€¢ 5 Shapes: Triangle, Hexagon, Diamond, Star, Octagon');
        console.log('  â€¢ Green = Positive change, Red = Negative change');
        console.log('  â€¢ Click shape â†’ Modal opens');
        console.log('  â€¢ Shapes animate/float smoothly');
        console.log('  â€¢ No console errors');
    </script>
</body>
</html>
